<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
  <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
  <title></title>
  <link rel="stylesheet" href="../../../assets/css/api.css"/>
  <link rel="stylesheet" href="../../../assets/css/style.css">
  <link rel="stylesheet" href="../../../assets/iconfont/iconfont.css">
  <style>
    html, body {
      height: 100%;
      position: relative;
    }

    .icon {
      width: 1em;
      height: 1em;
      vertical-align: -0.15em;
      fill: currentColor;
      overflow: hidden;
    }

    #app {
      flex: 1;
      height: 100%;
      background-color: #f0f0f0;
    }

    .content {
      padding: 5% 5% 0 0;
    }

    .hr {
      height: 1px;
      background-color: #f0f0f0;
    }

    /*导航*/
    .mint-navbar {
      font-size: 16px;
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 2;
      border-top: 10px solid #f0f0f0;
    }

    .mint-navbar .mint-tab-item.is-selected {
      border-bottom: 3px solid #ab9277;
      color: #000;
      margin-bottom: -3px;
    }

    .mint-navbar .mint-tab-item {
      margin: 0 0.7rem;
    }

    .mint-cell-left, .mint-cell-right, .mint-cell-title {
      display: none;
    }

    .mint-tab-item-label {
      font-size: 14px;
    }

    .mint-cell {
      border-bottom: 0.5rem solid #f0f0f0;
      /*margin-bottom: 0.5rem;*/
      /*padding: 0 0 0.5rem;*/
    }

    .mint-cell-wrapper {
      padding: 0;
    }

    .mint-cell-value {
      flex: 1;
      -webkit-box-flex: 1;
    }

    .mint-cell-title {
      flex: 0;
      -webkit-box-flex: 0;
    }

    /*评价*/
    .list-box {
      width: 100%;
      padding: 8px;
    }

    .list {
      width: 100%;
    }

    .username {
      display: flex;
      flex-direction: row;
      width: 100%;
      height: 3.5rem;
      padding: 0.5rem 3px 0.5rem;
    }

    .username .head-picture {
      width: 3rem;
      height: 3rem;

    }

    .head-picture img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
    }

    .vsure {
      position: absolute;
      left: 0.5rem;
      bottom: -0.1rem;
      width: 2rem;
      /*background-color: #ff8500;*/
      color: #fff;
      font-size: 16px;
      text-align: center;
    }

    .nickname {
      position: absolute;
      left: 3.5rem;
      top: 0.5rem;
      width: 6rem;
      font-size: 14px;
    }

    .date {
      padding-top: 0.5rem;
      text-align: right;
      font-size: 14px;
    }

    .username > .left {
      width: 50%;
    }

    .username > .right {
      width: 45%;
    }

    .hr1 {
      height: 1px;
      width: 100%;
      background-color: gainsboro;
    }

    .eva-msg-wrap {
      padding: 0 0 0.5rem 1.5rem;
      font-size: 14px;
    }

    .image {
      display: flex;
      flex-wrap: wrap;
      flex-direction: row;
      padding: 5px;
    }

    .flex-img {
      width: 3rem;
      height: 3rem;
      margin: 5px;
    }

    .flex-img img {
      width: 100%;
      height: 100%;
    }

    .goods-type {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      padding-bottom: 0.5rem;
    }

    .dianzan {
      flex: 1;
      padding-right: 10px;
      text-align: right;
    }

    .dianzan .iconfont {
      font-size: 12px;
    }

    .reply {
      padding: 0.6em 2px;
    }

    /*弹出框样式*/
    .mint-popup {
      background: rgba(255, 255, 255, 0);
    }

    .pop-wrap {
      display: flex;
      width: 14rem;
      justify-content: center;
      box-sizing: border-box;
      overflow: hidden;
      background-color: #fff;
      border-radius: 8px;
    }

    .certi-pop {
      height: 8rem;
      width: 100%;
      font-size: 14px;
      box-sizing: border-box;
      padding: 10px;
      border-radius: 8px;
    }

    p {
      font-size: 14px;
      width: 100%;
      margin-top: 25px;
      text-align: center;
    }

    .popbutton {
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 15px;
      box-sizing: border-box;
      margin-top: 30px;
    }

    .popbutton button {
      height: 30px;
      line-height: 30px;
      font-size: 14px;
      width: 90px;
      border: 1px solid #888;
      border-radius: 15px;
      outline: none;
    }

    /*星星*/
    .xing {
      margin-top: 10px;
    }

    .xing i {
      margin: 5px 2px 0 0;
      font-size: 12px;
    }

    .yellow {
      color: #ff8500;
    }

    .gray {
      color: #b5b5b5;
    }

    .bottomdiv {
      width: 100%;
      height: 2rem;
      text-align: center;
      line-height: 2rem;
      background: #f0f0f0;
      color: #8d8d8d;
    }

    .bottomdiv span {
      font-size: 10px;
    }
  </style>
</head>
<body>
<div id="loadStart"></div>
<div id='app'>
  <mt-popup v-model="popupVisible" popup-transition="popup-fade" modal="true">
    <div class="pop-wrap">
      <div class="certi-pop">
        <p>点评需要完成产品认证或者实名认证</p>
        <div class="popbutton">
          <button type="button" @click="openvAuth">实名认证</button>
          <button type="button" @click="openqAuth">产品认证</button>
        </div>
      </div>
    </div>
  </mt-popup>
  <mt-popup v-model="shenhezhong" popup-transition="popup-fade" modal="true">
    <div class="pop-wrap">
      <div class="certi-pop">
        <p>认证正在审核中，请耐心等候。。。</p>
        <div class="popbutton">
          <button type="button" style="width: 100%;" @click="closeRz">确定</button>
          <!--<button type="button">产品认证</button>-->
        </div>
      </div>
    </div>
  </mt-popup>
  <!--导航-->
  <!--<div class="hr"></div>-->
  <mt-navbar v-model="selected">
    <mt-tab-item id="1">全部</mt-tab-item>
    <mt-tab-item id="2">消费评价</mt-tab-item>
    <mt-tab-item id="3">普通点评</mt-tab-item>
    <mt-tab-item id="4">晒图</mt-tab-item>
  </mt-navbar>
  <div class="hr" style="padding-top: 3.1rem;"></div>
  <!-- 评价 -->
  <mt-tab-container v-model="selected">
    <mt-tab-container-item id="1">
      <mt-cell v-for="(item,index0) in allList">
        <!--使用v-for循环从后台调数据-->
        <div class="list-box">
          <div class="list">
            <div class="username">
              <div class="left">
                <div style="position: relative" class="head-picture">
                  <img :src="formatImg(item.avatar)"/>
                  <div>
                    <svg class="icon vsure" aria-hidden="true" v-show="item.isUserAuth === '1'">
                      <use xlink:href="#icon-vrenzheng"></use>
                    </svg>
                  </div>
                  <div class="nickname">
                    <div class="xinxi">
                      {{item.nickname}} <i class="iconfont icon-huangguan-copy"
                                           style="color: #ffbb28;font-size: 12px;"></i>
                    </div>
                    <div class="xing" v-show="item.isTotal == '1'">
                      <i class="iconfont icon-shoucang yellow" v-for="xing in Number(item.overallScore)"></i><i
                            class="iconfont icon-shoucang gray" v-for="xing in 5-Number(item.overallScore)"></i>

                    </div>
                  </div>
                </div>
              </div>
              <div class="right">
                <div class="date">{{item.addTime}}</div>
              </div>
            </div>
            <hr class="hr1">
            <div class="eva-msg-wrap">
              <!--评价信息-->
              <div class="message">
                <div class="text">
                  <div class="content">
                    {{item.content}}
                  </div>
                  <!--<span>......</span>-->
                </div>
                <!--<div class="full-text">全文</div>-->
                <!--<div class="pack">收起</div>-->
                <div class="image">
                  <div class="flex-img" v-for="img in cutImgurl(item.images,5)">
                    <img :src="formatImg(img)"/>
                  </div>
                </div>
                <div class="goods-type">
                  <!--<div>桐木 </div>-->
                  <div class="buy-date" style="color:#8d8d8d" v-if="item.payTime!==null">购买日期:{{item.payTime}}</div>
                  <div class="dianzan" @click="changeAgree(allList,index0)">
                    <i class="iconfont icon-xin" v-if="item.ifAgree==='1'" style="color: #ff4949;"></i>
                    <i class="iconfont icon-ziyuan8" v-else=""></i>
                    <span style="color:#8d8d8d">{{item.countAgree}}</span>
                  </div>
                </div>
              </div>

              <!--底部信息-->
              <div class="bottom" v-show="item.replyContent!==null">
                <hr class="hr1">
                <div class="reply-complain">
                  <div class="reply">
                    <span style="color:#ff4949">商家回复：</span>
                    <span class="replay-text">{{item.replyContent}}</span>
                  </div>

                </div>
              </div>
              <!--商家回复-->
              <!--查看全部-->
              <!--<div class="all">查看全部<span>(16)</span></div>-->
            </div>
          </div>
        </div>
      </mt-cell>
      <div class="hr"></div>

      <div class="bottomdiv">
        <span v-if="rote">---上拉加载---</span>
        <i v-if="load" class="iconfont publicfont icon-jiazai"></i>
        <span v-if="overlate">已无更多</span>
      </div>
    </mt-tab-container-item>

    <mt-tab-container-item id="2">
      <mt-cell v-for="(item,index) in consumeList">
        <!--使用v-for循环从后台调数据-->
        <div class="list-box">
          <div class="list">
            <div class="username">
              <div class="left">
                <div style="position: relative" class="head-picture">
                  <img :src="formatImg(item.avatar)"/>
                  <div>
                    <svg class="icon vsure" aria-hidden="true" v-show="item.isUserAuth==='1'">
                      <use xlink:href="#icon-vrenzheng"></use>
                    </svg>
                  </div>
                  <div class="nickname">
                    <div class="xinxi">
                      {{item.nickname}} <i class="iconfont icon-huangguan-copy"
                                           style="color: #ffbb28;font-size: 12px"></i>
                    </div>
                    <div class="xing">
                      <i class="iconfont icon-shoucang yellow" v-for="xing in Number(item.overallScore)"></i>
                      <i class="iconfont icon-shoucang gray" v-for="xing in 5-Number(item.overallScore)"></i>
                    </div>

                  </div>
                </div>
              </div>
              <div class="right">
                <div class="date">{{item.addTime}}</div>
              </div>
            </div>
            <hr class="hr1">
            <div class="eva-msg-wrap">
              <!--评价信息-->
              <div class="message">
                <div class="text">
                  <div class="content">
                    {{item.content}}
                  </div>
                  <!--<span>......</span>-->
                </div>
                <!--<div class="full-text">全文</div>-->
                <!--<div class="pack">收起</div>-->
                <div class="image">
                  <div class="flex-img" v-for="img in cutImgurl(item.images,5)">
                    <img :src="formatImg(img)"/>
                  </div>
                </div>
                <div class="goods-type">
                  <!--<div>桐木 </div>-->
                  <div class="buy-date" style="color:#8d8d8d" v-if="item.payTime!==null">购买日期:{{item.payTime}}</div>
                  <div class="dianzan" @click="changeAgree(consumeList,index)">
                    <i class="iconfont icon-xin" v-if="item.ifAgree==='1'" style="color: #ff4949;"></i>
                    <i class="iconfont icon-ziyuan8" v-else=""></i>
                    <span style="color:#8d8d8d">{{item.countAgree}}</span>
                  </div>
                </div>
              </div>

              <!--底部信息-->
              <div class="bottom" v-show="item.replyContent!==null">
                <hr class="hr1">
                <div class="reply-complain">
                  <div class="reply">
                    <span style="color:#ff4949">商家回复：</span>
                    <span class="replay-text">{{item.replyContent}}</span>
                  </div>

                </div>
              </div>
              <!--商家回复-->
              <!--查看全部-->
              <!--<div class="all">查看全部<span>(16)</span></div>-->
            </div>
          </div>
        </div>
      </mt-cell>
      <div class="hr"></div>

      <div class="bottomdiv">
        <span v-if="rote">---上拉加载---</span>
        <i v-if="load" class="iconfont publicfont icon-jiazai"></i>
        <span v-if="overlate">已无更多</span>
      </div>
    </mt-tab-container-item>
    <mt-tab-container-item id="3">
      <mt-cell v-for="(item,index) in ordinaryList">
        <!--使用v-for循环从后台调数据-->
        <div class="list-box">
          <div class="list">
            <div class="username">
              <div class="left">
                <div style="position: relative" class="head-picture">
                  <img :src="formatImg(item.avatar)"/>
                  <div>
                    <svg class="icon vsure" aria-hidden="true" v-show="item.isUserAuth==='1'">
                      <use xlink:href="#icon-vrenzheng"></use>
                    </svg>
                  </div>
                  <div class="nickname">
                    <div class="xinxi">
                      {{item.nickname}} <i class="iconfont icon-huangguan-copy"
                                           style="color: #ffbb28;font-size: 12px"></i>
                    </div>
                    <div class="xing">
                      <i class="iconfont icon-shoucang yellow" v-for="xing in Number(item.overallScore)"></i>
                      <i class="iconfont icon-shoucang gray" v-for="xing in 5-Number(item.overallScore)"></i>
                    </div>

                  </div>
                </div>
              </div>
              <div class="right">
                <div class="date">{{item.addTime}}</div>
              </div>
            </div>
            <hr class="hr1">
            <div class="eva-msg-wrap">
              <!--评价信息-->
              <div class="message">
                <div class="text">
                  <div class="content">
                    {{item.content}}
                  </div>
                  <!--<span>......</span>-->
                </div>
                <!--<div class="full-text">全文</div>-->
                <!--<div class="pack">收起</div>-->
                <div class="image">
                  <div class="flex-img" v-for="img in cutImgurl(item.images,5)">
                    <img :src="formatImg(img)"/>
                  </div>
                </div>
                <div class="goods-type">
                  <!--<div>桐木 </div>-->
                  <div class="buy-date" style="color:#8d8d8d" v-if="item.payTime!==null">购买日期:{{item.payTime}}</div>
                  <div class="dianzan" @click="changeAgree(ordinaryList,index)">
                    <i class="iconfont icon-xin" v-if="item.ifAgree==='1'" style="color: #ff4949;"></i>
                    <i class="iconfont icon-ziyuan8" v-else=""></i>
                    <span style="color:#8d8d8d">{{item.countAgree}}</span>
                  </div>
                </div>
              </div>

              <!--底部信息-->
              <div class="bottom" v-show="item.replyContent!==null">
                <hr class="hr1">
                <div class="reply-complain">
                  <div class="reply">
                    <span style="color:#ff4949">商家回复：</span>
                    <span class="replay-text">{{item.replyContent}}</span>
                  </div>

                </div>
              </div>
              <!--商家回复-->
              <!--查看全部-->
              <!--<div class="all">查看全部<span>(16)</span></div>-->
            </div>
          </div>
        </div>
      </mt-cell>
      <div class="hr"></div>

      <div class="bottomdiv">
        <span v-if="rote">---上拉加载---</span>
        <i v-if="load" class="iconfont publicfont icon-jiazai"></i>
        <span v-if="overlate">已无更多</span>
      </div>
    </mt-tab-container-item>
    <mt-tab-container-item id="4">
      <mt-cell v-for="(item,index) in picList">
        <!--使用v-for循环从后台调数据-->
        <div class="list-box">
          <div class="list">
            <div class="username">
              <div class="left">
                <div style="position: relative" class="head-picture">
                  <img :src="formatImg(item.avatar)"/>
                  <div>
                    <svg class="icon vsure" aria-hidden="true" v-show="item.isUserAuth==='1'">
                      <use xlink:href="#icon-vrenzheng"></use>
                    </svg>
                  </div>
                  <div class="nickname">
                    <div class="xinxi">
                      {{item.nickname}} <i class="iconfont icon-huangguan-copy"
                                           style="color: #ffbb28;font-size: 12px"></i>
                    </div>
                    <div class="xing">
                      <i class="iconfont icon-shoucang yellow" v-for="xing in Number(item.overallScore)"></i>
                      <i class="iconfont icon-shoucang gray" v-for="xing in 5-Number(item.overallScore)"></i>
                    </div>

                  </div>
                </div>
              </div>
              <div class="right">
                <div class="date">{{item.addTime}}</div>
              </div>
            </div>
            <hr class="hr1">
            <div class="eva-msg-wrap">
              <!--评价信息-->
              <div class="message">
                <div class="text">
                  <div class="content">
                    {{item.content}}
                  </div>
                  <!--<span>......</span>-->
                </div>
                <!--<div class="full-text">全文</div>-->
                <!--<div class="pack">收起</div>-->
                <div class="image">
                  <div class="flex-img" v-for="img in cutImgurl(item.images,5)">
                    <img :src="formatImg(img)"/>
                  </div>
                </div>
                <div class="goods-type">
                  <!--<div>桐木 </div>-->
                  <div class="buy-date" style="color:#8d8d8d" v-if="item.payTime!==null">购买日期:{{item.payTime}}</div>
                  <div class="dianzan" @click="changeAgree(picList,index)">
                    <i class="iconfont icon-xin" v-if="item.ifAgree==='1'" style="color: #ff4949;"></i>
                    <i class="iconfont icon-ziyuan8" v-else=""></i>
                    <span style="color:#8d8d8d">{{item.countAgree}}</span>
                  </div>
                </div>
              </div>

              <!--底部信息-->
              <div class="bottom" v-if="item.replyContent!==null">
                <hr class="hr1">
                <div class="reply-complain">
                  <div class="reply">
                    <span style="color:#ff4949">商家回复：</span>
                    <span class="replay-text">{{item.replyContent}}</span>
                  </div>

                </div>
              </div>
              <!--商家回复-->
              <!--查看全部-->
              <!--<div class="all">查看全部<span>(16)</span></div>-->
            </div>
          </div>
        </div>
      </mt-cell>
      <div class="hr"></div>

      <div class="bottomdiv">
        <span v-if="rote">---上拉加载---</span>
        <i v-if="load" class="iconfont publicfont icon-jiazai"></i>
        <span v-if="overlate">已无更多</span>
      </div>
    </mt-tab-container-item>
  </mt-tab-container>
</div>
</body>
</html>
<script type="text/javascript" src="../../../assets/js/api.js"></script>
<script type="text/javascript" src="../../../assets/js/public.js"></script>
<script type="text/javascript" src="../../../assets/js/fastclick.js"></script>
<script>
  new FastClick(document.body);
</script>
<script type="text/javascript" src="../../../assets/js/vue.min.js"></script>
<script type="text/javascript" src="../../../assets/js/vue-resource.js"></script>
<script type="text/javascript" src="../../../assets/js/index.js"></script>
<script src="../../../assets/iconfont/iconfont.js"></script>
<script type="text/javascript">
  var app = new Vue({
    el: '#app',
    data: {
      popupVisible: false,
      selected: '1',
      shenhezhong: false,
      isUserAuth: null,
      isQinAuth: null,
      allList: [],
      consumeList: [],
      ordinaryList: [],
      picList: [],
      page: [1, 1, 1, 1],
      totalPage: [0, 0, 0, 0],
      count: [0, 0, 0, 0],
      rote: false,
      load: false,
      overlate: false,
      firstCount: 0
    },
    watch: {
      firstCount: function (value) {
        if (value === 1) {
          loadEnd();
        }
      },
      selected: function (val) {
        app.load = true;
        app.rote = false;
        app.overlate = false;
        switch (val) {
          case '1': {
            if (app.allList.length == 0) {
              app.page.splice(0, 1, 1);
              app.newCommentForJX(1);
            }
            break;
          }
          case '2': {
            if (app.consumeList.length == 0) {
              app.page.splice(1, 1, 1);
              app.newCommentForJX1(1);
            }
            break;
          }
          case '3': {
            if (app.ordinaryList.length == 0) {
              app.page.splice(2, 1, 1);
              app.newCommentForJX0(1);
            }
            break;
          }
          case '4': {
            if (app.picList.length == 0) {
              app.page.splice(3, 1, 1);
              app.newCommentForJX2(1);
            }
            break;
          }
        }
      }
    },
    created: function () {
      apiready = function () {
        app.newCommentForJX(1, function () {
          app.firstCount++;
        });
        api.addEventListener({
          name: 'openAuth'
        }, function () {
          app.popupVisible = true;
        });

        api.addEventListener({
          name: 'jxCommentUpdate'
        }, function () {
          app.newCommentForJX(1);
        });

        api.addEventListener({
          name: 'scrolltobottom',
          extra: {
            threshold: 0 //设置距离底部多少距离时触发，默认值为0，数字类型
          }
        }, function (ret, err) {
          app.load = true;
          app.rote = false;
          app.overlate = false;
          switch (app.selected) {
            case'1': {
              if (app.page[0] <= app.totalPage[0]) {
                app.newCommentForJX(2);
              } else {
                app.load = false;
                app.rote = false;
                app.overlate = true;
              }
              break;
            }
            case '2': {
              if (app.page[1] <= app.totalPage[1]) {
                app.newCommentForJX1(2);
              } else {
                app.load = false;
                app.rote = false;
                app.overlate = true;
              }
              break;
            }
            case '3': {
              if (app.page[2] <= app.totalPage[2]) {
                app.newCommentForJX0(2);
              } else {
                app.load = false;
                app.rote = false;
                app.overlate = true;
              }
              break;
            }
            case '4': {
              if (app.page[3] <= app.totalPage[3]) {
                app.newCommentForJX2(2);
              } else {
                app.load = false;
                app.rote = false;
                app.overlate = true;
              }
              break;
            }
          }
        });
      }
    },
    methods: {
      closeRz: function () {
        app.shenhezhong = false;
      },
      openvAuth: function () {
        // 去实名认证
        app.isUserAuth = api.pageParam.isUserAuth;
        app.popupVisible = false;
        if (app.isUserAuth == '2') {
          app.shenhezhong = true;
        } else {
          api.openWin({
            name: 'leaguer_win',
            url: '../../leaguer/leaguer_win.html',
            pageParam: {
              index: 1
            }
          });
        }
      },
      openqAuth: function () {
        // 去产品认证
        app.isQinAuth = api.pageParam.isQinAuth;
        app.popupVisible = false;
        if (app.isQinAuth == '2') {
          app.shenhezhong = true;
        } else {
          openView('qinAuth_fm', 'qinAuth/qinAuth_fm', '产品认证');
        }
      },
      newCommentForJX: function (ref, callback) {
        // 获取网友留言
        var post = {
          cmd: 'newCommentForJX',
          token: getToken(),
          page: app.page[0]
        };
        sendAjax(this, post, function (res) {
          if (ref == 1) {
            app.allList = res.data.proList;
            app.totalPage[0] = res.data.totalPage;
            app.page[0]++;
            app.rote = true;
            app.load = false
          } else {
            app.allList = app.allList.concat(res.data.proList);
            app.page[0]++;
            app.rote = true;
            app.load = false
          }
          // app.allList = res.data.proList;
          if (callback) {
            callback();
          }
        });
      },
      newCommentForJX1: function (ref, callback) {
        // 获取消费评价
        var post1 = {
          cmd: 'newCommentForJX',
          token: getToken(),
          isTotal: '1',
          page: app.page[1]
        };
        sendAjax(this, post1, function (res) {
          if (ref == 1) {
            app.consumeList = res.data.proList;
            app.totalPage[1] = res.data.totalPage;
            app.page[1]++;
            app.rote = true;
            app.load = false
          } else {
            app.consumeList = app.consumeList.concat(res.data.proList);
            app.page[1]++;
            app.rote = true;
            app.load = false
          }
          if (callback) {
            callback();
          }
        });
      },
      newCommentForJX0: function (ref, callback) {
        // 获取普通点评
        var post2 = {
          cmd: 'newCommentForJX',
          token: getToken(),
          isTotal: '0',
          page: app.page[2]
        };
        sendAjax(this, post2, function (res) {
          if (ref == 1) {
            app.ordinaryList = res.data.proList;
            app.totalPage[2] = res.data.totalPage;
            app.page[2]++;
            app.rote = true;
            app.load = false
          } else {
            app.ordinaryList = app.ordinaryList.concat(res.data.proList);
            app.page[2]++;
            app.rote = true;
            app.load = false
          }
          if (callback) {
            callback();
          }
        });
      },
      newCommentForJX2: function (ref, callback) {
        // 获取晒图
        var post3 = {
          cmd: 'newCommentForJX',
          token: getToken(),
          isTotal: '2',
          page: app.page[3]
        };
        sendAjax(this, post3, function (res) {
          if (ref == 1) {
            app.picList = res.data.proList;
            app.totalPage[3] = res.data.totalPage;
            app.page[3]++;
            app.rote = true;
            app.load = false
          } else {
            app.picList = app.picList.concat(res.data.proList);
            app.page[3]++;
            app.rote = true;
            app.load = false
          }
          app.picList = res.data.proList;
          if (callback) {
            callback();
          }
        });
      },
      changeAgree: function (arr, ind) {
        if (arr[ind].ifAgree === '-1') {
          arr[ind].ifAgree = '1';
          arr[ind].countAgree++;
          app.jxCommentAgree(arr[ind].id);
        } else if (arr[ind].ifAgree === '1') {
          arr[ind].ifAgree = '-1';
          arr[ind].countAgree--;
          app.jxCommentAgree(arr[ind].id);
        }
      },
      jxCommentAgree: function (ret) {
        var post = {
          cmd: 'jxCommentAgree',
          token: getToken(),
          commentId: ret
        };
        sendAjax(this, post, function (res) {
        })
      }
    }
  });
</script>